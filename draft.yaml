models:

  # Sales and Revenue

  Quotation:
    customer_id: unsignedInteger
    company_id: unsignedInteger
    tax_id: json          # Tax 
    term_id: unsignedInteger       # Linked terms and conditions
    subtotal: decimal:8,2    # Total before tax and discount
    discount: decimal:8,2    # Total discount applied
    discount_type: enum:flat,percentage  # Type of discount
    total: decimal:8,2       # Final payable amount
    currency: string         # Currency code
    note: string nullable
    status: enum:draft, sent, accepted, declined, expired
    issue_date: datetime
    expiry_date: datetime
    relationships:
      belongsTo: Company, Customer
      hasOne: Term
      hasMany: Product, Proforma Invoice, Tax
      belongsToMany: Product

  Proforma Invoice:
    customer_id: unsignedInteger
    company_id: unsignedInteger
    quotation_id: unsignedInteger  # Optional, if derived from a Quotation
    tax_id: json            # Tax 
    term_id: unsignedInteger       # Linked terms and conditions
    subtotal: decimal:8,2    # Total before tax and discount
    discount: decimal:8,2    # Total discount applied
    discount_type: enum:flat,percentage  # Type of discount
    total: decimal:8,2       # Final payable amount
    currency: string         # Currency code
    note: string nullable
    status: enum:pending,approved,rejected,paid,cancelled
    issue_date: date               # Date of issue
    due_date: date                 # Payment due date
    relationships:
      belongsTo: Company, Customer, Quotation
      hasMany: Product, Tax
      hasOne: Invoice, Term

  Invoice:
    customer_id: unsignedInteger
    company_id: unsignedInteger
    quotation_id: unsignedInteger
    proforma_invoice_id: unsignedInteger
    tax_id: json            # Tax 
    term_id: unsignedInteger       # Linked terms and conditions
    subtotal: decimal:8,2    # Total before tax and discount
    discount: decimal:8,2    # Total discount applied
    discount_type: enum:flat,percentage  # Type of discount
    total: decimal:8,2       # Final payable amount
    currency: string         # Currency code
    note: string nullable
    status: enum:pending,approved,rejected,paid,cancelled
    issue_date: date               # Date of issue
    due_date: date                 # Payment due date
    relationships:
      belongsTo: Company, Customer, Quotation, Proforma Invoice
      hasMany: Product, Tax
      belongsToMany: Payment
      hasOne: Term

  Sales Order:
    customer_id: unsignedInteger
    company_id: unsignedInteger
    invoice_id: unsignedInteger
    term_id: unsignedInteger  # Linked terms and conditions
    product_ids: json  # Store multiple product IDs
    subtotal: decimal:8,2    # Total before tax and discount
    discount: decimal:8,2    # Total discount applied
    discount_type: enum:flat,percentage  # Type of discount
    total: decimal:8,2       # Final payable amount
    currency: string         # Currency code
    note: string nullable
    status: enum:pending,approved,rejected,paid,cancelled
    relationships:
      belongsTo: Company, Customer
      belongsToMany: Product
      hasOne: Term, Invoice

  Recurring Invoice:
    customer_id: unsignedInteger
    company_id: unsignedInteger
    tax_ids: json            # Linked tax IDs
    product_ids: json        # Linked product IDs
    term_id: unsignedInteger # Linked terms and conditions
    schedule: json           # Recurrence schedule (e.g., {"frequency": "monthly", "day": 15})
    subtotal: decimal:8,2    # Total before tax and discount
    discount: decimal:8,2    # Total discount applied
    discount_type: enum:flat,percentage
    total: decimal:8,2       # Final payable amount
    currency: string         # Currency code
    note: string nullable
    status: enum:active,inactive,cancelled
    start_date: date         # Start of recurring invoice
    end_date: date nullable  # End of recurring invoice
    relationships:
      belongsTo: Company, Customer
      hasMany: Product
      hasOne: Invoice 

  Credit Note:
    customer_id: unsignedInteger
    company_id: unsignedInteger
    product_ids: json  # Store multiple product IDs
    invoice_id: unsignedInteger
    amount: decimal:8,2
    note: string nullable
    term_id: unsignedInteger  # Linked terms and conditions
    relationships:
      belongsTo: Company, Customer, Invoice
      hasMany: Product

  Debit Note:
    company_id: unsignedInteger
    customer_id: unsignedInteger
    invoice_id: unsignedInteger
    amount: decimal:8,2
    description: text
    status: enum:pending, resolved
    relationships:
      belongsTo: Company, Customer, Invoice
      hasMany: Product

  Payment:
    company_id: unsignedInteger
    customer_id: unsignedInteger
    invoice_id: unsignedInteger
    amount: decimal:8,2
    payment_method: enum:bank_transfer, credit_card, cash
    transaction_reference: string
    payment_date: date
    status: enum:completed, pending, failed
    relationships:
      belongsTo: Company, Customer
      belongsToMany: Invoice  # A Payment can be related to multiple Invoices

  Statement of Account:
    company_id: unsignedInteger
    customer_id: unsignedInteger
    start_date: date
    end_date: date
    total_due: decimal:8,2
    currency: string
    relationships:
      belongsTo: Company, Customer
      hasMany: Invoice, Payment, Credit Note, Debit Note

  Term:
    title: string
    type: enum:quotation, proforma_invoice, invoice, credit_note, debit_note, sales_order, recurring_invoice
    description: text
    relationships:
      belongsTo: Company
      hasMany: Quotation, Proforma Invoice, Invoice, Credit Note, Debit Note, Sales Order, Recurring Invoice



# Company registration handled separately (documentation needed)
  Company:
    name: string unique
    industry: string
    code: string unique          # auto-generated based on input
    business_address: string
    registration_address: string
    country_of_registration: string
    registration_number: string unique
    contact_number: string
    status: enum:inactive,active,suspended
    relationships:
      hasMany: User, Customer, Supplier, Product, Department

  Department:
    company_id: unsignedInteger
    name: string
    slug: string
    relationships:
      belongsTo: Company
      hasMany: User

  Role:
    name: string
    permissions: array  # Array of permission IDs or names
    relationships:
      belongsToMany: Permission

  Permission:
    name: string
    description: text
    role_id: unsignedInteger
    relationships:
      belongsToMany: Role

  Industry:
    name: string
    description: text

  # Other Entity Models

  Customer:
    name: string
    email: email
    phone: string
    address: string
    company_id: unsignedInteger
    relationships:
      belongsToMany: Product
      belongsTo: Supplier

  Supplier:
    name: string
    email: email
    phone: string
    address: string
    company_id: unsignedInteger
    relationships:
      belongsTo: Customer

  Tax:
    code: string
    rate: decimal

  Currency:
    code: string
    symbol: string
    name: string

  Product:
    name: string
    sku: string
    price: decimal
    stock: unsignedInteger
    company_id: unsignedInteger
    relationships:
      belongsToMany: SalesOrder, Customer
      belongsTo: Supplier
      hasMany: Invoice



controllers:
  # ...
